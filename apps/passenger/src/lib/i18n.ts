export type Locale = 'bs' | 'en'

const translations = {
  bs: {
    app_name: 'Bus Banja Luka',
    nearby_stops: 'Obližnje stanice',
    search_placeholder: 'Kuda idete?',
    minutes_short: 'min',
    departures: 'Polasci',
    routes: 'Linije',
    map: 'Mapa',
    home: 'Početna',
    timetable: 'Red vožnje',
    stops: 'Stanice',
    arriving_in: 'Dolazi za',
    no_service: 'Nema polazaka',
    save_stop: 'Sačuvaj stanicu',
    saved: 'Sačuvano',
    favorites: 'Omiljeno',
    all_routes: 'Sve linije',
    direction: 'Smjer',
    outbound: 'Polazak',
    inbound: 'Povratak',
    weekdays: 'Radnim danom',
    saturday: 'Subotom',
    sunday: 'Nedjeljom',
    live: 'Uživo',
    scheduled: 'Po redu vožnje',
    install_app: 'Instaliraj aplikaciju',
    offline: 'Nema internet konekcije',
    loading: 'Učitavanje...',
    error: 'Greška',
    retry: 'Pokušaj ponovo',
    no_results: 'Nema rezultata',
    search_routes: 'Pretraži linije...',
    search_stops: 'Pretraži stanice...',
    route_detail: 'Detalji linije',
    stop_detail: 'Detalji stanice',
    operator: 'Prevoznik',
    interval: 'Interval',
    every_min: 'svakih min',
    distance: 'Udaljenost',
    active_buses: 'Aktivni autobusi',
    on_time: 'Na vrijeme',
    delayed: 'Kasni',
    speed: 'Brzina',
    next_stop: 'Sljedeća stanica',
    locate_me: 'Moja lokacija',
    filter_routes: 'Filtriraj linije',
    see_full_map: 'Pogledaj mapu',
    no_arrivals: 'Nema dolazaka',
    favorite_routes: 'Omiljene linije',
    favorite_stops: 'Omiljene stanice',
  },
  en: {
    app_name: 'Bus Banja Luka',
    nearby_stops: 'Nearby Stops',
    search_placeholder: 'Where are you going?',
    minutes_short: 'min',
    departures: 'Departures',
    routes: 'Routes',
    map: 'Map',
    home: 'Home',
    timetable: 'Timetable',
    stops: 'Stops',
    arriving_in: 'Arriving in',
    no_service: 'No departures',
    save_stop: 'Save stop',
    saved: 'Saved',
    favorites: 'Favorites',
    all_routes: 'All routes',
    direction: 'Direction',
    outbound: 'Outbound',
    inbound: 'Inbound',
    weekdays: 'Weekdays',
    saturday: 'Saturday',
    sunday: 'Sunday',
    live: 'Live',
    scheduled: 'Scheduled',
    install_app: 'Install app',
    offline: 'No internet connection',
    loading: 'Loading...',
    error: 'Error',
    retry: 'Try again',
    no_results: 'No results',
    search_routes: 'Search routes...',
    search_stops: 'Search stops...',
    route_detail: 'Route detail',
    stop_detail: 'Stop detail',
    operator: 'Operator',
    interval: 'Interval',
    every_min: 'every min',
    distance: 'Distance',
    active_buses: 'Active buses',
    on_time: 'On time',
    delayed: 'Delayed',
    speed: 'Speed',
    next_stop: 'Next stop',
    locate_me: 'My location',
    filter_routes: 'Filter routes',
    see_full_map: 'See full map',
    no_arrivals: 'No arrivals',
    favorite_routes: 'Favorite routes',
    favorite_stops: 'Favorite stops',
  },
} as const

export type TranslationKey = keyof typeof translations.bs

export function getLocale(): Locale {
  if (typeof window === 'undefined') return 'bs'
  return (localStorage.getItem('locale') as Locale) || 'bs'
}

export function setLocale(locale: Locale) {
  localStorage.setItem('locale', locale)
}

export function t(key: TranslationKey, locale?: Locale): string {
  const l = locale || getLocale()
  return translations[l][key] || translations.bs[key] || key
}
